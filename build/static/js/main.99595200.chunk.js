(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{158:function(e,t,n){},192:function(e,t,n){e.exports=n(348)},346:function(e,t,n){},348:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(55),l=n.n(c),o=n(18),u=n(8),s=n.n(u),i=n(16),p=n(34),m=n.n(p),d={getAll:function(){var e=Object(i.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},f=function(){return function(){var e=Object(i.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getAll();case 2:n=e.sent,t({type:"INIT_USERS",data:n});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"INIT_USERS"===t.type?t.data:e},b=n(181),v=n(180),g=null,E=function(){var e=Object(i.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/blogs");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(i.a)(s.a.mark(function e(t){var n,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:g}},e.next=3,m.a.post("/api/blogs",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(i.a)(s.a.mark(function e(t,n){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.put("".concat("/api/blogs","/").concat(t),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=Object(i.a)(s.a.mark(function e(t,n){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("".concat("/api/blogs","/").concat(t,"/comments"),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),w={getAll:E,create:y,update:O,remove:function(){var e=Object(i.a)(s.a.mark(function e(t){var n,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:g}},e.next=3,m.a.delete("".concat("/api/blogs","/").concat(t),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){g="bearer ".concat(e)},addComment:j},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_BLOGS":return t.data;case"CREATE_BLOG":return Object(v.a)(e).concat([t.data]);case"LIKE_BLOG":return e.map(function(e){return e.id!==t.data.id?e:t.data});case"DELETE_BLOG":return e.filter(function(e){return e.id!==t.id});case"ADD_COMMENT":return e.map(function(e){return e.id!==t.data.id?e:t.data});default:return e}},x=n(24),S=n(25),C=n(27),R=n(26),G=n(28),L={login:function(){var e=Object(i.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"LOGGEDIN":return t.user;case"LOGOUT":return null;default:return e}},_={content:"Message form chef",style:"",visibility:!1},A=function(e,t,n){return function(a){a({type:"NEW_MSG",content:e,style:n}),setTimeout(function(){a({type:"HIDE_MSG"})},1e3*t)}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_MSG":return{content:t.content,style:t.style,visibility:!0};case"HIDE_MSG":return _;default:return e}},T=n(364),B=n(109),D=n(357),U=n(360),M=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(C.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(){var e=Object(i.a)(s.a.mark(function e(t){var a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=t.target.id.value,r={comment:t.target.comment.value},n.props.addComment(a,r),n.props.notify("your comment '".concat(t.target.comment.value,"'"),5,"success"),t.target.comment.value="";case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(G.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props.blog,t=e.comments.map(function(e,t){return r.a.createElement("li",{key:t},e)});return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(T.a,{as:"h3",color:"grey"},r.a.createElement(B.a,{name:"comments"}),"comments")),r.a.createElement(D.a,null),r.a.createElement("div",null,r.a.createElement(U.a,{onSubmit:this.handleSubmit},r.a.createElement(U.a.Group,null,r.a.createElement("input",{type:"hidden",name:"id",value:e.id}),r.a.createElement(U.a.Input,{placeholder:"comment...",name:"comment"}),r.a.createElement(U.a.Button,{size:"tiny",content:"add"})))),r.a.createElement("ul",null,t))}}]),t}(r.a.Component),W=Object(o.b)(null,{notify:A,addComment:function(e,t){return function(){var n=Object(i.a)(s.a.mark(function n(a){var r;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,w.addComment(e,t);case 3:r=n.sent,console.log("Add comment:: ",r),a({type:"ADD_COMMENT",data:r}),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),console.log("ERROR:: ",n.t0.message),a({type:"NEW_MSG",content:n.t0.message,style:"error"});case 12:case"end":return n.stop()}},n,this,[[0,8]])}));return function(e){return n.apply(this,arguments)}}()}})(M),z=n(362),F=n(363),H=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(C.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).toggleLike=function(e,t){return function(){n.props.like(e),n.props.notify("you liked '".concat(t,"'"),10,"success")}},n.remove=function(e,t,a){return function(){console.log("Remove ",e,t),!1!==window.confirm("remove blog '".concat(t,"' by ").concat(a,"?"))&&(n.props.deleteBlog(e),n.props.notify("blog '".concat(t,"' by ").concat(a," removed"),5,"success"))}},n}return Object(G.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.username,n=e.blog;if(void 0===n)return r.a.createElement("div",null,r.a.createElement("h3",null,"No blog here!"));var a=n.user?n.user.name:"anonymous",c=void 0===n.user||n.user.username===t;return r.a.createElement(z.a,{centered:!0},r.a.createElement(z.a.Content,null,r.a.createElement(T.a,{as:"h1"},n.title),r.a.createElement(T.a,{as:"h3"},n.author),r.a.createElement("a",{href:n.url},n.url)),r.a.createElement(z.a.Content,{extra:!0},r.a.createElement(T.a,{as:"h5"},"added by ",a,c&&r.a.createElement(F.a,{negative:!0,size:"mini",floated:"right",onClick:this.remove(n.id,n.title,n.author)},"delete")),r.a.createElement(F.a,{size:"mini",floated:"right",color:"green",content:"Likes",icon:"thumbs up",label:{as:"a",basic:!0,pointing:"right",content:"".concat(n.likes)},labelPosition:"left",onClick:this.toggleLike(n.id,n.title)})),r.a.createElement(z.a.Content,null,r.a.createElement(W,{blog:n})))}}]),t}(r.a.Component),J=Object(o.b)(null,{notify:A,like:function(e){return function(){var t=Object(i.a)(s.a.mark(function t(n){var a,r,c;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.getAll();case 3:return a=t.sent,r=a.find(function(t){return t.id===e}),c=Object(b.a)({},r,{likes:r.likes+1}),t.next=8,w.update(e,c);case 8:n({type:"LIKE_BLOG",data:c}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:"NEW_MSG",content:t.t0.message,style:"error"});case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return function(e){return t.apply(this,arguments)}}()},deleteBlog:function(e){return function(){var t=Object(i.a)(s.a.mark(function t(n){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.remove(e);case 3:n({type:"DELETE_BLOG",id:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),n({type:"NEW_MSG",content:t.t0.message,style:"error"});case 9:case"end":return t.stop()}},t,this,[[0,6]])}));return function(e){return t.apply(this,arguments)}}()}})(H),K=n(343),P=n(367),q=Object(o.b)(function(e){return{blogs:(t=e.blogs,t.sort(function(e,t){return t.likes-e.likes}))};var t},null)(function(e){return r.a.createElement("div",null,r.a.createElement(T.a,{as:"h2",color:"grey"},"Blogs"),r.a.createElement(P.a.Group,null,e.blogs.map(function(e){return r.a.createElement(P.a,{key:e.id},r.a.createElement(K.a,{to:"/blogs/".concat(e.id)},e.title," ",e.author))})))}),Q=(n(158),function(e){function t(){return Object(x.a)(this,t),Object(C.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props.notification,t={display:e.visibility?"":"none"};return r.a.createElement("div",{style:t},r.a.createElement("div",{className:e.style},e.content))}}]),t}(r.a.Component)),V=Object(o.b)(function(e){return{notification:e.notification}})(Q),X=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(C.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(){var e=Object(i.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n.props.login(t.target.username.value,t.target.password.value),t.target.username.value="",t.target.password.value="";case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(G.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return r.a.createElement(z.a,{centered:!0,style:{marginTop:20}},r.a.createElement(z.a.Content,null,r.a.createElement(T.a,{as:"h2",color:"green"},"Kirjaudu sovellukseen")),r.a.createElement(z.a.Content,null,r.a.createElement(U.a,{onSubmit:this.handleSubmit},r.a.createElement(U.a.Field,null,r.a.createElement("label",null,"k\xe4ytt\xe4j\xe4tunnus"),r.a.createElement("input",{type:"text",name:"username"})),r.a.createElement(U.a.Field,null,r.a.createElement("label",null,"salasana"),r.a.createElement("input",{type:"password",name:"password"})),r.a.createElement(F.a,{basic:!0,color:"green"},"kirjaudu"))))}}]),t}(r.a.Component),Y=Object(o.b)(null,{login:function(e,t){return function(){var n=Object(i.a)(s.a.mark(function n(a){var r;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,L.login({username:e,password:t});case 3:r=n.sent,window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(r)),w.setToken(r.token),a({type:"LOGIN",user:r}),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),console.log("ERROR:: ",n.t0.message),a({type:"NEW_MSG",content:"wrong username or password",style:"error"});case 13:case"end":return n.stop()}},n,this,[[0,9]])}));return function(e){return n.apply(this,arguments)}}()}})(X),Z=n(366),$=n(358),ee=function(e){function t(e){var n;return Object(x.a)(this,t),(n=Object(C.a)(this,Object(R.a)(t).call(this,e))).visibility=function(){n.setState({visible:!n.state.visible})},n.handleSubmit=function(){var e=Object(i.a)(s.a.mark(function e(t){var a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=t.target.blogTitle.value,r={title:a,author:t.target.blogAuthor.value,url:t.target.blogUrl.value},t.target.blogTitle.value="",t.target.blogAuthor.value="",t.target.blogUrl.value="",n.props.createBlog(r),n.props.notify("you created '".concat(a,"'"),10,"success"),n.visibility();case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.state={visible:!1},n}return Object(G.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e={display:this.state.visible?"none":""},t={display:this.state.visible?"":"none"};return r.a.createElement(Z.a,null,r.a.createElement(Z.a.Row,{columns:1},r.a.createElement(Z.a.Column,null,r.a.createElement("div",{style:e,className:"toRight"},r.a.createElement(F.a,{primary:!0,size:"tiny",onClick:this.visibility,content:"new blog"})),r.a.createElement("div",{style:t},r.a.createElement($.a,{style:{width:400}},r.a.createElement(T.a,{as:"h2",color:"green"},"Create new"),r.a.createElement(U.a,{size:"small",onSubmit:this.handleSubmit},r.a.createElement(U.a.Field,null,r.a.createElement("label",null,"Title"),r.a.createElement("input",{type:"text",name:"blogTitle"})),r.a.createElement(U.a.Field,null,r.a.createElement("label",null,"Author"),r.a.createElement("input",{type:"text",name:"blogAuthor"})),r.a.createElement(U.a.Field,null,r.a.createElement("label",null,"Url"),r.a.createElement("input",{type:"text",name:"blogUrl"})),r.a.createElement(F.a,{basic:!0,color:"green"},"tallenna"),r.a.createElement(F.a,{type:"button",onClick:this.visibility,content:"cancel"})))))))}}]),t}(r.a.Component),te=Object(o.b)(null,{notify:A,createBlog:function(e){return function(){var t=Object(i.a)(s.a.mark(function t(n){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.create(e);case 3:a=t.sent,n({type:"CREATE_BLOG",data:a}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("ERROR:: ",t.t0.message),n({type:"NEW_MSG",content:t.t0.message,style:"error"});case 11:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()}})(ee),ne=n(361),ae=function(e){function t(){return Object(x.a)(this,t),Object(C.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return console.log("USERLIST: ",this.props.users),0!==this.props.users.length?r.a.createElement("div",{className:"centered"},console.log("IN USERLIST: ",this.props.users),r.a.createElement("h2",null,"Users"),r.a.createElement(ne.a,{basic:!0},r.a.createElement(ne.a.Header,null,r.a.createElement(ne.a.Row,null,r.a.createElement(ne.a.HeaderCell,null,"User"),r.a.createElement(ne.a.HeaderCell,null,"blogs added"))),r.a.createElement(ne.a.Body,null,this.props.users.map(function(e){return r.a.createElement(ne.a.Row,{key:e.id},r.a.createElement(ne.a.Cell,null,r.a.createElement(K.a,{to:"/users/".concat(e.id)},r.a.createElement("div",null,e.name))),r.a.createElement(ne.a.Cell,null,e.blogs?e.blogs.length:0))})))):r.a.createElement("div",null,r.a.createElement("h2",null,"users"))}}]),t}(r.a.Component),re=Object(o.b)(function(e){return{users:e.users}},{initUsers:f})(ae),ce=function(e){function t(){return Object(x.a)(this,t),Object(C.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props.user;return void 0===e?"":r.a.createElement(z.a,{centered:!0},r.a.createElement(z.a.Content,null,r.a.createElement(T.a,{as:"h2"},e.name)),r.a.createElement(z.a.Content,{extra:!0},r.a.createElement(T.a,{as:"h4"},"added blogs"),r.a.createElement("ul",null,e.blogs.map(function(e){return r.a.createElement("li",{key:e._id},r.a.createElement(K.a,{to:"/blogs/".concat(e._id)},e.title))}))))}}]),t}(r.a.Component),le=n(359),oe=function(e){var t=e.user,n=e.logout;return r.a.createElement("div",{className:"menu"},r.a.createElement(le.a,{exact:!0,activeStyle:{fontWeight:"bold",color:"DarkRed"},to:"/"},"BLOGS")," \xa0",r.a.createElement(le.a,{exact:!0,activeStyle:{fontWeight:"bold",color:"DarkRed"},to:"/users"},"USERS")," \xa0",r.a.createElement("em",null,t.name," logged in")," \xa0",t&&r.a.createElement(F.a,{size:"tiny",color:"teal",onClick:n},"logout"))},ue=n(365),se=n(350),ie=function(e){function t(){return Object(x.a)(this,t),Object(C.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=window.localStorage.getItem("loggedBlogAppUser");if(e){var t=JSON.parse(e);this.props.loggedUser(t)}}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.users,a=e.blogs,c=e.logout;return null===t?r.a.createElement(Y,null):r.a.createElement($.a,null,r.a.createElement("h2",null,"Blog app"),r.a.createElement(V,null),r.a.createElement(ue.a,null,r.a.createElement("div",null,r.a.createElement(oe,{user:t,logout:c}),r.a.createElement(te,null),r.a.createElement(se.a,{exact:!0,path:"/",render:function(){return r.a.createElement(q,null)}}),r.a.createElement(se.a,{exact:!0,path:"/blogs/:id",render:function(e){var n=e.match;return r.a.createElement(J,{blog:a.find(function(e){return e.id===n.params.id}),username:t.username})}}),r.a.createElement(se.a,{exact:!0,path:"/users",render:function(){return r.a.createElement(re,null)}}),r.a.createElement(se.a,{exact:!0,path:"/users/:id",render:function(e){var t=e.match;return r.a.createElement(ce,{user:n.find(function(e){return e.id===t.params.id})})}}))))}}]),t}(r.a.Component),pe={logout:function(){return function(e){window.localStorage.removeItem("loggedBlogAppUser"),e({type:"LOGOUT"})}},loggedUser:function(e){return function(){var t=Object(i.a)(s.a.mark(function t(n){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"LOGGEDIN",user:e});case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},me=Object(o.b)(function(e){return{user:e.user,users:e.users,blogs:e.blogs}},pe)(ie),de=n(46),fe=n(178),he=n(179),be={message:null},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ERROR":return{message:t.message};case"CLEAR_ERROR":return be;default:return e}},ge=Object(de.combineReducers)({blogs:k,users:h,notification:I,user:N,errors:ve}),Ee=Object(de.createStore)(ge,Object(he.composeWithDevTools)(Object(de.applyMiddleware)(fe.a)));console.log(Ee.getState());var ye=Ee;n(346);ye.dispatch(f()),ye.dispatch(function(){var e=Object(i.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getAll();case 2:n=e.sent,t({type:"INIT_BLOGS",data:n});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),console.log(ye.getState()),l.a.render(r.a.createElement(o.a,{store:ye},r.a.createElement(me,null)),document.getElementById("root"))}},[[192,2,1]]]);
//# sourceMappingURL=main.99595200.chunk.js.map